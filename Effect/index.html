<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComposableArchitecture - Effect</title>
    <link rel="stylesheet" type="text/css" href="/swift-composable-architecture/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/swift-composable-architecture/">
            <strong>
                ComposableArchitecture
            </strong>
            <span>Documentation</span>
        </a>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Nested Types</a></li><li><a href="#relationships">Conforms To</a></li></ul></li><li><a href="#initializers">Initializers</a><ul><li class="initializer"><a href="#effect.init(_:)">init(_:​)</a></li><li class="initializer"><a href="#effect.init(value:)">init(value:​)</a></li><li class="initializer"><a href="#effect.init(error:)">init(error:​)</a></li></ul></li><li><a href="#properties">Properties</a><ul><li class="variable"><a href="#effect.upstream">upstream</a></li><li class="variable"><a href="#effect.none">none</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="function"><a href="#effect.receive(subscriber:)">receive(subscriber:​)</a></li><li class="function"><a href="#effect.future(_:)">future(_:​)</a></li><li class="function"><a href="#effect.result(_:)">result(_:​)</a></li><li class="function"><a href="#effect.run(_:)">run(_:​)</a></li><li class="function"><a href="#effect.concatenate(_:)">concatenate(_:​)</a></li><li class="function"><a href="#effect.concatenate(_:)">concatenate(_:​)</a></li><li class="function"><a href="#effect.merge(_:)">merge(_:​)</a></li><li class="function"><a href="#effect.merge(_:)">merge(_:​)</a></li><li class="function"><a href="#effect.fireandforget(_:)">fire​And​Forget(_:​)</a></li><li class="function"><a href="#effect.map(_:)">map(_:​)</a></li><li class="function"><a href="#effect.cancellable(id:cancelinflight:)">cancellable(id:​cancel​InFlight:​)</a></li><li class="function"><a href="#effect.cancel(id:)">cancel(id:​)</a></li><li class="function"><a href="#effect.cancel(ids:)">cancel(ids:​)</a></li><li class="function"><a href="#effect.cancel(ids:)">cancel(ids:​)</a></li><li class="function"><a href="#effect.task(priority:operation:_:)">task(priority:​operation:​_:​)</a></li><li class="function"><a href="#effect.debounce(id:for:scheduler:options:)">debounce(id:​for:​scheduler:​options:​)</a></li><li class="function"><a href="#effect.deferred(for:scheduler:options:)">deferred(for:​scheduler:​options:​)</a></li><li class="function"><a href="#effect.throttle(id:for:scheduler:latest:)">throttle(id:​for:​scheduler:​latest:​)</a></li><li class="function"><a href="#effect.failing(_:)">failing(_:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Structure</small>
    <code class="name">Effect</code>
</h1>

<div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">struct</span> <span class="type">Effect</span>&lt;<span class="variable">Output</span>, <span class="variable">Failure</span>: <span class="type">Error</span>&gt;: <span class="type">Publisher</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The <code>Effect</code> type encapsulates a unit of work that can be run in the outside world, and can
feed data back to the <code>Store</code>. It is the perfect place to do side effects, such as network
requests, saving/loading from disk, creating timers, interacting with dependencies, and more.</p>

</div>
<div class="discussion">
    <p>Effects are returned from reducers so that the <code>Store</code> can perform the effects after the
reducer is done running. It is important to note that <code>Store</code> is not thread safe, and so all
effects must receive values on the same thread, <strong>and</strong> if the store is being used to drive UI
then it must receive values on the main thread.</p>

<p>An effect simply wraps a <code>Publisher</code> value and provides some convenience initializers for
constructing some common types of effects.</p>

</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        <figure>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %105 Pages: 1 -->
<svg width="872pt" height="116pt"
 viewBox="0.00 0.00 872.00 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>%105</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-112 868,-112 868,4 -4,4"/>
<!-- Effect -->
<g id="node1" class="node structure current">
<title>Effect</title>
<g id="a_node1"><a xlink:href="/swift-composable-architecture/Effect" xlink:title="Effect">
<path fill="none" stroke="#000000" stroke-width="3" d="M528,-108C528,-108 336,-108 336,-108 330,-108 324,-102 324,-96 324,-96 324,-84 324,-84 324,-78 330,-72 336,-72 336,-72 528,-72 528,-72 534,-72 540,-78 540,-84 540,-84 540,-96 540,-96 540,-102 534,-108 528,-108"/>
<text text-anchor="middle" x="432" y="-86.3" font-family="Menlo" font-size="14.00" fill="#000000">Effect</text>
</a>
</g>
</g>
<!-- Publisher -->
<g id="node2" class="node unknown">
<title>Publisher</title>
<path fill="none" stroke="#000000" d="M528,-36C528,-36 336,-36 336,-36 330,-36 324,-30 324,-24 324,-24 324,-12 324,-12 324,-6 330,0 336,0 336,0 528,0 528,0 534,0 540,-6 540,-12 540,-12 540,-24 540,-24 540,-30 534,-36 528,-36"/>
<text text-anchor="middle" x="432" y="-14.3" font-family="Menlo" font-size="14.00" fill="#000000">Publisher</text>
</g>
<!-- Effect&#45;&gt;Publisher -->
<g id="edge1" class="edge conformsTo">
<title>Effect&#45;&gt;Publisher</title>
<path fill="none" stroke="#000000" d="M432,-71.8314C432,-64.131 432,-54.9743 432,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="435.5001,-46.4132 432,-36.4133 428.5001,-46.4133 435.5001,-46.4132"/>
</g>
</g>
</svg>


    <figcaption hidden>Inheritance graph for Effect.</figcaption>
</figure>
        <h3>Nested Types</h3>
<dl>
    <dt class="structure"><code><a href="/swift-composable-architecture/Effect_Subscriber">Effect.Subscriber</a></code></dt>
<dd></dd>
</dl>
<h3>Conforms To</h3>
<dl>
    <dt class="unknown"><code>Publisher</code></dt>
</dl>
</section>
    <section id="initializers">
        <h2>Initializers</h2>

        <div role="article" class="initializer" id="effect.init(_:)">
    <h3>
        <code><a href="#effect.init(_:)">init(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">init</span>&lt;<span class="variable">P</span>: <span class="type">Publisher</span>&gt;(<span class="keyword">_</span> <span class="variable">publisher</span>: <span class="type">P</span>) <span class="keyword">where</span> <span class="type">P</span>.<span class="type">Output</span> == <span class="type">Output</span>, <span class="type">P</span>.<span class="type">Failure</span> == <span class="type">Failure</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Initializes an effect that wraps a publisher. Each emission of the wrapped publisher will be
emitted by the effect.</p>

</div>
<div class="discussion">
    <p>This initializer is useful for turning any publisher into an effect. For example:</p>

<html><body><pre class="highlight"><code><span class="variable">Effect</span>(
  <span class="variable">NotificationCenter</span>.<span class="variable">default</span>
    .<span class="variable">publisher</span>(<span class="variable">for</span>: <span class="type">UIApplication</span>.<span class="variable">userDidTakeScreenshotNotification</span>)
)
</code></pre></body></html>
<p>Alternatively, you can use the <code>.eraseToEffect()</code> method that is defined on the <code>Publisher</code>
protocol:</p>

<html><body><pre class="highlight"><code><span class="variable">NotificationCenter</span>.<span class="variable">default</span>
  .<span class="variable">publisher</span>(<span class="variable">for</span>: <span class="type">UIApplication</span>.<span class="variable">userDidTakeScreenshotNotification</span>)
  .<span class="variable">eraseToEffect</span>()
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>publisher</th>
    <td><code class="type">P</code></td>
    <td><p>A publisher.</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="initializer" id="effect.init(value:)">
    <h3>
        <code><a href="#effect.init(value:)">init(value:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">init</span>(<span class="variable">value</span>: <span class="type">Output</span>)  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Initializes an effect that immediately emits the value passed in.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>value</th>
    <td><code class="type">Output</code></td>
    <td><p>The value that is immediately emitted by the effect.</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="initializer" id="effect.init(error:)">
    <h3>
        <code><a href="#effect.init(error:)">init(error:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">init</span>(<span class="variable">error</span>: <span class="type">Failure</span>)  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Initializes an effect that immediately fails with the error passed in.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>error</th>
    <td><code class="type">Failure</code></td>
    <td><p>The error that is immediately emitted by the effect.</p>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>
    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="effect.upstream">
    <h3>
        <code><a href="#effect.upstream">upstream</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">let</span> <span class="variable">upstream</span>: <span class="type">AnyPublisher</span>&lt;<span class="type">Output</span>, <span class="type">Failure</span>&gt;</body></html></code></pre>
</div>
</div>
<div role="article" class="variable" id="effect.none">
    <h3>
        <code><a href="#effect.none">none</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">var</span> <span class="variable">none</span>: <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An effect that does nothing and completes immediately. Useful for situations where you must
return an effect, but you don't need to do anything.</p>

</div>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="effect.receive(subscriber:)">
    <h3>
        <code><a href="#effect.receive(subscriber:)">receive(subscriber:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">receive</span>&lt;<span class="variable">S</span>&gt;(
    <span class="variable">subscriber</span>: <span class="type">S</span>
  ) <span class="keyword">where</span> <span class="type">S</span>: <span class="type">Combine</span>.<span class="type">Subscriber</span>, <span class="type">Failure</span> == <span class="type">S</span>.<span class="type">Failure</span>, <span class="type">Output</span> == <span class="type">S</span>.<span class="type">Input</span>  </body></html></code></pre>
</div>
</div>
<div role="article" class="function" id="effect.future(_:)">
    <h3>
        <code><a href="#effect.future(_:)">future(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">future</span>(
    <span class="keyword">_</span> <span class="variable">attemptToFulfill</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">Result</span>&lt;<span class="type">Output</span>, <span class="type">Failure</span>&gt;) -&gt; <span class="type">Void</span>) -&gt; <span class="type">Void</span>
  ) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Creates an effect that can supply a single value asynchronously in the future.</p>

</div>
<div class="discussion">
    <p>This can be helpful for converting APIs that are callback-based into ones that deal with
<code>Effect</code>s.</p>

<p>For example, to create an effect that delivers an integer after waiting a second:</p>

<html><body><pre class="highlight"><code><span class="variable">Effect</span>&lt;<span class="type">Int</span>, <span class="type">Never</span>&gt;.<span class="variable">future</span> { <span class="variable">callback</span> <span class="keyword">in</span>
  <span class="variable">DispatchQueue</span>.<span class="variable">main</span>.<span class="variable">asyncAfter</span>(<span class="variable">deadline</span>: .<span class="variable">now</span>() + <span class="number literal">1</span>) {
    <span class="variable">callback</span>(.<span class="variable">success</span>(<span class="number literal">42</span>))
  }
}
</code></pre></body></html>
<p>Note that you can only deliver a single value to the <code>callback</code>. If you send more they will be
discarded:</p>

<html><body><pre class="highlight"><code><span class="variable">Effect</span>&lt;<span class="type">Int</span>, <span class="type">Never</span>&gt;.<span class="variable">future</span> { <span class="variable">callback</span> <span class="keyword">in</span>
  <span class="variable">DispatchQueue</span>.<span class="variable">main</span>.<span class="variable">asyncAfter</span>(<span class="variable">deadline</span>: .<span class="variable">now</span>() + <span class="number literal">1</span>) {
    <span class="variable">callback</span>(.<span class="variable">success</span>(<span class="number literal">42</span>))
    <span class="variable">callback</span>(.<span class="variable">success</span>(<span class="number literal">1729</span>)) <span class="comment">// Will not be emitted by the effect</span>
  }
}
</code></pre></body></html>
<p>If you need to deliver more than one value to the effect, you should use the <code>Effect</code>
initializer that accepts a <code>Subscriber</code> value.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>attempt​ToFulfill</th>
    <td><code class="type">@escaping (@escaping (Result&lt;Output, Failure&gt;) -&gt; Void) -&gt; Void</code></td>
    <td><p>A closure that takes a <code>callback</code> as an argument which can be used to feed it <code>Result&lt;Output, Failure&gt;</code> values.</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="function" id="effect.result(_:)">
    <h3>
        <code><a href="#effect.result(_:)">result(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">result</span>(<span class="keyword">_</span> <span class="variable">attemptToFulfill</span>: <span class="attribute">@</span><span class="attribute">escaping</span> () -&gt; <span class="type">Result</span>&lt;<span class="type">Output</span>, <span class="type">Failure</span>&gt;) -&gt; <span class="keyword">Self</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Initializes an effect that lazily executes some work in the real world and synchronously sends
that data back into the store.</p>

</div>
<div class="discussion">
    <p>For example, to load a user from some JSON on the disk, one can wrap that work in an effect:</p>

<html><body><pre class="highlight"><code><span class="variable">Effect</span>&lt;<span class="type">User</span>, <span class="type">Error</span>&gt;.<span class="variable">result</span> {
  <span class="keyword">let</span> <span class="variable">fileUrl</span> = <span class="variable">URL</span>(
    <span class="variable">fileURLWithPath</span>: <span class="type">NSSearchPathForDirectoriesInDomains</span>(
      .<span class="variable">documentDirectory</span>, .<span class="variable">userDomainMask</span>, <span class="keyword">true</span>
    )[<span class="number literal">0</span>]
  )
  .<span class="variable">appendingPathComponent</span>(<span class="string literal">"</span><span class="string literal">user.json</span><span class="string literal">"</span>)

  <span class="keyword">let</span> <span class="variable">result</span> = <span class="variable">Result</span>&lt;<span class="type">User</span>, <span class="type">Error</span>&gt; {
    <span class="keyword">let</span> <span class="variable">data</span> = <span class="keyword">try</span> <span class="variable">Data</span>(<span class="variable">contentsOf</span>: <span class="type">fileUrl</span>)
    <span class="keyword">return</span> <span class="keyword">try</span> <span class="variable">JSONDecoder</span>().<span class="variable">decode</span>(<span class="variable">User</span>.<span class="keyword">self</span>, <span class="variable">from</span>: <span class="variable">$0</span>)
  }

  <span class="keyword">return</span> <span class="variable">result</span>
}
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>attempt​ToFulfill</th>
    <td><code class="type">@escaping () -&gt; Result&lt;Output, Failure&gt;</code></td>
    <td><p>A closure encapsulating some work to execute in the real world.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An effect.</p>

</div>
<div role="article" class="function" id="effect.run(_:)">
    <h3>
        <code><a href="#effect.run(_:)">run(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">run</span>(
    <span class="keyword">_</span> <span class="variable">work</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>.<span class="type">Subscriber</span>) -&gt; <span class="type">Cancellable</span>
  ) -&gt; <span class="keyword">Self</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Initializes an effect from a callback that can send as many values as it wants, and can send
a completion.</p>

</div>
<div class="discussion">
    <p>This initializer is useful for bridging callback APIs, delegate APIs, and manager APIs to the
<code>Effect</code> type. One can wrap those APIs in an Effect so that its events are sent through the
effect, which allows the reducer to handle them.</p>

<p>For example, one can create an effect to ask for access to <code>MPMediaLibrary</code>. It can start by
sending the current status immediately, and then if the current status is <code>notDetermined</code> it
can request authorization, and once a status is received it can send that back to the effect:</p>

<html><body><pre class="highlight"><code><span class="variable">Effect</span>.<span class="variable">run</span> { <span class="variable">subscriber</span> <span class="keyword">in</span>
  <span class="variable">subscriber</span>.<span class="variable">send</span>(<span class="variable">MPMediaLibrary</span>.<span class="variable">authorizationStatus</span>())

  <span class="keyword">guard</span> <span class="variable">MPMediaLibrary</span>.<span class="variable">authorizationStatus</span>() == .<span class="variable">notDetermined</span> <span class="keyword">else</span> {
    <span class="variable">subscriber</span>.<span class="variable">send</span>(<span class="variable">completion</span>: .<span class="variable">finished</span>)
    <span class="keyword">return</span> <span class="variable">AnyCancellable</span> {}
  }

  <span class="variable">MPMediaLibrary</span>.<span class="variable">requestAuthorization</span> { <span class="variable">status</span> <span class="keyword">in</span>
    <span class="variable">subscriber</span>.<span class="variable">send</span>(<span class="variable">status</span>)
    <span class="variable">subscriber</span>.<span class="variable">send</span>(<span class="variable">completion</span>: .<span class="variable">finished</span>)
  }
  <span class="keyword">return</span> <span class="variable">AnyCancellable</span> {
    <span class="comment">// Typically clean up resources that were created here, but this effect doesn't</span>
    <span class="comment">// have any.</span>
  }
}
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>work</th>
    <td><code class="type">@escaping (Effect.​Subscriber) -&gt; Cancellable</code></td>
    <td><p>A closure that accepts a <code>Subscriber</code> value and returns a cancellable. When the <code>Effect</code> is completed, the cancellable will be used to clean up any resources created when the effect was started.</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="function" id="effect.concatenate(_:)">
    <h3>
        <code><a href="#effect.concatenate(_:)">concatenate(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">concatenate</span>(<span class="keyword">_</span> <span class="variable">effects</span>: <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>...) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Concatenates a variadic list of effects together into a single effect, which runs the effects
one after the other.</p>

</div>
<div class="discussion">
    <aside class="warning" title="Warning">
    <p>Feedback filed: <a href="https://gist.github.com/mbrandonw/611c8352e1bd1c22461bd505e320ab58">https://gist.github.com/mbrandonw/611c8352e1bd1c22461bd505e320ab58</a></p>

</aside>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>effects</th>
    <td><code class="type">Effect</code></td>
    <td><p>A variadic list of effects.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect</p>

</div>
<div role="article" class="function" id="effect.concatenate(_:)">
    <h3>
        <code><a href="#effect.concatenate(_:)">concatenate(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">concatenate</span>&lt;<span class="variable">C</span>: <span class="type">Collection</span>&gt;(
    <span class="keyword">_</span> <span class="variable">effects</span>: <span class="type">C</span>
  ) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a> <span class="keyword">where</span> <span class="type">C</span>.<span class="type">Element</span> == <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Concatenates a collection of effects together into a single effect, which runs the effects one
after the other.</p>

</div>
<div class="discussion">
    <aside class="warning" title="Warning">
    <p>Feedback filed: <a href="https://gist.github.com/mbrandonw/611c8352e1bd1c22461bd505e320ab58">https://gist.github.com/mbrandonw/611c8352e1bd1c22461bd505e320ab58</a></p>

</aside>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>effects</th>
    <td><code class="type">C</code></td>
    <td><p>A collection of effects.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect</p>

</div>
<div role="article" class="function" id="effect.merge(_:)">
    <h3>
        <code><a href="#effect.merge(_:)">merge(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">merge</span>(
    <span class="keyword">_</span> <span class="variable">effects</span>: <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>...
  ) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Merges a variadic list of effects together into a single effect, which runs the effects at the
same time.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>effects</th>
    <td><code class="type">Effect</code></td>
    <td><p>A list of effects.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect</p>

</div>
<div role="article" class="function" id="effect.merge(_:)">
    <h3>
        <code><a href="#effect.merge(_:)">merge(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">merge</span>&lt;<span class="variable">S</span>: <span class="type">Sequence</span>&gt;(<span class="keyword">_</span> <span class="variable">effects</span>: <span class="type">S</span>) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a> <span class="keyword">where</span> <span class="type">S</span>.<span class="type">Element</span> == <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Merges a sequence of effects together into a single effect, which runs the effects at the same
time.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>effects</th>
    <td><code class="type">S</code></td>
    <td><p>A sequence of effects.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect</p>

</div>
<div role="article" class="function" id="effect.fireandforget(_:)">
    <h3>
        <code><a href="#effect.fireandforget(_:)">fire​And​Forget(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">fireAndForget</span>(<span class="keyword">_</span> <span class="variable">work</span>: <span class="attribute">@</span><span class="attribute">escaping</span> () -&gt; <span class="type">Void</span>) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Creates an effect that executes some work in the real world that doesn't need to feed data
back into the store.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>work</th>
    <td><code class="type">@escaping () -&gt; Void</code></td>
    <td><p>A closure encapsulating some work to execute in the real world.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An effect.</p>

</div>
<div role="article" class="function" id="effect.map(_:)">
    <h3>
        <code><a href="#effect.map(_:)">map(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">map</span>&lt;<span class="variable">T</span>&gt;(<span class="keyword">_</span> <span class="variable">transform</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">Output</span>) -&gt; <span class="type">T</span>) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>&lt;<span class="type">T</span>, <span class="type">Failure</span>&gt;  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Transforms all elements from the upstream effect with a provided closure.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>transform</th>
    <td><code class="type">@escaping (Output) -&gt; T</code></td>
    <td><p>A closure that transforms the upstream effect's output to a new output.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A publisher that uses the provided closure to map elements from the upstream effect to new elements that it then publishes.</p>

</div>
<div role="article" class="function" id="effect.cancellable(id:cancelinflight:)">
    <h3>
        <code><a href="#effect.cancellable(id:cancelinflight:)">cancellable(id:​cancel​InFlight:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">cancellable</span>(<span class="variable">id</span>: <span class="type">AnyHashable</span>, <span class="variable">cancelInFlight</span>: <span class="type">Bool</span> = <span class="keyword">false</span>) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Turns an effect into one that is capable of being canceled.</p>

</div>
<div class="discussion">
    <p>To turn an effect into a cancellable one you must provide an identifier, which is used in
<code>Effect/cancel(id:)</code> to identify which in-flight effect should be canceled. Any hashable
value can be used for the identifier, such as a string, but you can add a bit of protection
against typos by defining a new type that conforms to <code>Hashable</code>, such as an empty struct:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">LoadUserId</span>: <span class="type">Hashable</span> {}

<span class="keyword">case</span> .<span class="variable">reloadButtonTapped</span>:
  <span class="comment">// Start a new effect to load the user</span>
  <span class="keyword">return</span> <span class="variable">environment</span>.<span class="variable">loadUser</span>
    .<span class="variable">map</span>(<span class="variable">Action</span>.<span class="variable">userResponse</span>)
    .<span class="variable">cancellable</span>(<span class="variable">id</span>: <span class="type">LoadUserId</span>(), <span class="variable">cancelInFlight</span>: <span class="keyword">true</span>)

<span class="keyword">case</span> .<span class="variable">cancelButtonTapped</span>:
  <span class="comment">// Cancel any in-flight requests to load the user</span>
  <span class="keyword">return</span> .<span class="variable">cancel</span>(<span class="variable">id</span>: <span class="type">LoadUserId</span>())
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>id</th>
    <td><code class="type">Any​Hashable</code></td>
    <td><p>The effect's identifier.</p>
</td>
</tr>
<tr>
    <th>cancel​InFlight</th>
    <td><code class="type">Bool</code></td>
    <td><p>Determines if any in-flight effect with the same identifier should be canceled before starting this new one.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect that is capable of being canceled by an identifier.</p>

</div>
<div role="article" class="function" id="effect.cancel(id:)">
    <h3>
        <code><a href="#effect.cancel(id:)">cancel(id:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">cancel</span>(<span class="variable">id</span>: <span class="type">AnyHashable</span>) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An effect that will cancel any currently in-flight effect with the given identifier.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>id</th>
    <td><code class="type">Any​Hashable</code></td>
    <td><p>An effect identifier.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect that will cancel any currently in-flight effect with the given identifier.</p>

</div>
<div role="article" class="function" id="effect.cancel(ids:)">
    <h3>
        <code><a href="#effect.cancel(ids:)">cancel(ids:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="attribute">@</span><span class="attribute">_disfavoredOverload</span>
  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">cancel</span>(<span class="variable">ids</span>: <span class="type">AnyHashable</span>...) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An effect that will cancel multiple currently in-flight effects with the given identifiers.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>ids</th>
    <td><code class="type">Any​Hashable</code></td>
    <td><p>A variadic list of effect identifiers.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect that will cancel any currently in-flight effects with the given identifiers.</p>

</div>
<div role="article" class="function" id="effect.cancel(ids:)">
    <h3>
        <code><a href="#effect.cancel(ids:)">cancel(ids:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">cancel</span>&lt;<span class="variable">S</span>: <span class="type">Sequence</span>&gt;(<span class="variable">ids</span>: <span class="type">S</span>) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a> <span class="keyword">where</span> <span class="type">S</span>.<span class="type">Element</span> == <span class="type">AnyHashable</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An effect that will cancel multiple currently in-flight effects with the given identifiers.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>ids</th>
    <td><code class="type">S</code></td>
    <td><p>A sequence of effect identifiers.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>A new effect that will cancel any currently in-flight effects with the given identifiers.</p>

</div>
<div role="article" class="function" id="effect.task(priority:operation:_:)">
    <h3>
        <code><a href="#effect.task(priority:operation:_:)">task(priority:​operation:​_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">task</span>(
      <span class="variable">priority</span>: <span class="type">TaskPriority</span>? = <span class="keyword">nil</span>,
      <span class="variable">operation</span>: <span class="attribute">@</span><span class="attribute">escaping</span> <span class="attribute">@</span><span class="attribute">Sendable</span> () <span class="type">async</span> -&gt; <span class="type">Output</span>
    ) -&gt; <span class="keyword">Self</span> <span class="keyword">where</span> <span class="type">Failure</span> == <span class="type">Never</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Wraps an asynchronous unit of work in an effect.</p>

</div>
<div class="discussion">
    <p>This function is useful for executing work in an asynchronous context and capture the
result in an <code>Effect</code> so that the reducer, a non-asynchronous context, can process it.</p>

<html><body><pre class="highlight"><code><span class="variable">Effect</span>.<span class="variable">task</span> {
  <span class="keyword">guard</span> <span class="keyword">case</span> <span class="keyword">let</span> .<span class="variable">some</span>((<span class="variable">data</span>, <span class="keyword">_</span>)) = <span class="keyword">try</span>? <span class="variable">await</span> <span class="variable">URLSession</span>.<span class="variable">shared</span>
    .<span class="variable">data</span>(<span class="variable">from</span>: .<span class="variable">init</span>(<span class="variable">string</span>: <span class="string literal">"</span><span class="string literal">http://numbersapi.com/42</span><span class="string literal">"</span>)!)
  <span class="keyword">else</span> {
    <span class="keyword">return</span> <span class="string literal">"</span><span class="string literal">Could not load</span><span class="string literal">"</span>
  }

  <span class="keyword">return</span> <span class="variable">String</span>(<span class="variable">decoding</span>: <span class="type">data</span>, <span class="variable">as</span>: <span class="type">UTF8</span>.<span class="keyword">self</span>)
}
</code></pre></body></html>
<p>Note that due to the lack of tools to control the execution of asynchronous work in Swift,
it is not recommended to use this function in reducers directly. Doing so will introduce
thread hops into your effects that will make testing difficult. You will be responsible
for adding explicit expectations to wait for small amounts of time so that effects can
deliver their output.</p>

<p>Instead, this function is most helpful for calling <code>async</code>/<code>await</code> functions from the live
implementation of dependencies, such as <code>URLSession.data</code>, <code>MKLocalSearch.start</code> and more.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>priority</th>
    <td><code class="type">Task​Priority?</code></td>
    <td><p>Priority of the underlying task. If <code>nil</code>, the priority will come from <code>Task.currentPriority</code>.</p>
</td>
</tr>
<tr>
    <th>operation</th>
    <td><code class="type">@escaping @Sendable ()</code></td>
    <td><p>The operation to execute.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An effect wrapping the given asynchronous work.</p>

</div>
<div role="article" class="function" id="effect.debounce(id:for:scheduler:options:)">
    <h3>
        <code><a href="#effect.debounce(id:for:scheduler:options:)">debounce(id:​for:​scheduler:​options:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">debounce</span>&lt;<span class="variable">S</span>: <span class="type">Scheduler</span>&gt;(
    <span class="variable">id</span>: <span class="type">AnyHashable</span>,
    <span class="variable">for</span> <span class="variable">dueTime</span>: <span class="type">S</span>.<span class="type">SchedulerTimeType</span>.<span class="type">Stride</span>,
    <span class="variable">scheduler</span>: <span class="type">S</span>,
    <span class="variable">options</span>: <span class="type">S</span>.<span class="type">SchedulerOptions</span>? = <span class="keyword">nil</span>
  ) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Turns an effect into one that can be debounced.</p>

</div>
<div class="discussion">
    <p>To turn an effect into a debounce-able one you must provide an identifier, which is used to
determine which in-flight effect should be canceled in order to start a new effect. Any
hashable value can be used for the identifier, such as a string, but you can add a bit of
protection against typos by defining a new type that conforms to <code>Hashable</code>, such as an empty
struct:</p>

<html><body><pre class="highlight"><code><span class="keyword">case</span> <span class="keyword">let</span> .<span class="variable">textChanged</span>(<span class="variable">text</span>):
  <span class="keyword">struct</span> <span class="type">SearchId</span>: <span class="type">Hashable</span> {}

  <span class="keyword">return</span> <span class="variable">environment</span>.<span class="variable">search</span>(<span class="variable">text</span>)
    .<span class="variable">debounce</span>(<span class="variable">id</span>: <span class="type">SearchId</span>(), <span class="variable">for</span>: <span class="number literal">0.5</span>, <span class="variable">scheduler</span>: <span class="type">environment</span>.<span class="variable">mainQueue</span>)
    .<span class="variable">map</span>(<span class="variable">Action</span>.<span class="variable">searchResponse</span>)
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>id</th>
    <td><code class="type">Any​Hashable</code></td>
    <td><p>The effect's identifier.</p>
</td>
</tr>
<tr>
    <th>due​Time</th>
    <td><code class="type">S.​Scheduler​Time​Type.​Stride</code></td>
    <td><p>The duration you want to debounce for.</p>
</td>
</tr>
<tr>
    <th>scheduler</th>
    <td><code class="type">S</code></td>
    <td><p>The scheduler you want to deliver the debounced output to.</p>
</td>
</tr>
<tr>
    <th>options</th>
    <td><code class="type">S.​Scheduler​Options?</code></td>
    <td><p>Scheduler options that customize the effect's delivery of elements.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An effect that publishes events only after a specified time elapses.</p>

</div>
<div role="article" class="function" id="effect.deferred(for:scheduler:options:)">
    <h3>
        <code><a href="#effect.deferred(for:scheduler:options:)">deferred(for:​scheduler:​options:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">deferred</span>&lt;<span class="variable">S</span>: <span class="type">Scheduler</span>&gt;(
    <span class="variable">for</span> <span class="variable">dueTime</span>: <span class="type">S</span>.<span class="type">SchedulerTimeType</span>.<span class="type">Stride</span>,
    <span class="variable">scheduler</span>: <span class="type">S</span>,
    <span class="variable">options</span>: <span class="type">S</span>.<span class="type">SchedulerOptions</span>? = <span class="keyword">nil</span>
  ) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Returns an effect that will be executed after given <code>dueTime</code>.</p>

</div>
<div class="discussion">
    <html><body><pre class="highlight"><code><span class="keyword">case</span> <span class="keyword">let</span> .<span class="variable">textChanged</span>(<span class="variable">text</span>):
  <span class="keyword">return</span> <span class="variable">environment</span>.<span class="variable">search</span>(<span class="variable">text</span>)
    .<span class="variable">deferred</span>(<span class="variable">for</span>: <span class="number literal">0.5</span>, <span class="variable">scheduler</span>: <span class="type">environment</span>.<span class="variable">mainQueue</span>)
    .<span class="variable">map</span>(<span class="variable">Action</span>.<span class="variable">searchResponse</span>)
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>upstream</th>
    <td></td>
    <td><p>the effect you want to defer.</p>
</td>
</tr>
<tr>
    <th>due​Time</th>
    <td><code class="type">S.​Scheduler​Time​Type.​Stride</code></td>
    <td><p>The duration you want to defer for.</p>
</td>
</tr>
<tr>
    <th>scheduler</th>
    <td><code class="type">S</code></td>
    <td><p>The scheduler you want to deliver the defer output to.</p>
</td>
</tr>
<tr>
    <th>options</th>
    <td><code class="type">S.​Scheduler​Options?</code></td>
    <td><p>Scheduler options that customize the effect's delivery of elements.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An effect that will be executed after <code>dueTime</code></p>

</div>
<div role="article" class="function" id="effect.throttle(id:for:scheduler:latest:)">
    <h3>
        <code><a href="#effect.throttle(id:for:scheduler:latest:)">throttle(id:​for:​scheduler:​latest:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">throttle</span>&lt;<span class="variable">S</span>&gt;(
    <span class="variable">id</span>: <span class="type">AnyHashable</span>,
    <span class="variable">for</span> <span class="variable">interval</span>: <span class="type">S</span>.<span class="type">SchedulerTimeType</span>.<span class="type">Stride</span>,
    <span class="variable">scheduler</span>: <span class="type">S</span>,
    <span class="variable">latest</span>: <span class="type">Bool</span>
  ) -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a> <span class="keyword">where</span> <span class="type">S</span>: <span class="type">Scheduler</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Throttles an effect so that it only publishes one output per given interval.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>id</th>
    <td><code class="type">Any​Hashable</code></td>
    <td><p>The effect's identifier.</p>
</td>
</tr>
<tr>
    <th>interval</th>
    <td><code class="type">S.​Scheduler​Time​Type.​Stride</code></td>
    <td><p>The interval at which to find and emit the most recent element, expressed in the time system of the scheduler.</p>
</td>
</tr>
<tr>
    <th>scheduler</th>
    <td><code class="type">S</code></td>
    <td><p>The scheduler you want to deliver the throttled output to.</p>
</td>
</tr>
<tr>
    <th>latest</th>
    <td><code class="type">Bool</code></td>
    <td><p>A boolean value that indicates whether to publish the most recent element. If <code>false</code>, the publisher emits the first element received during the interval.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An effect that emits either the most-recent or first element received during the specified interval.</p>

</div>
<div role="article" class="function" id="effect.failing(_:)">
    <h3>
        <code><a href="#effect.failing(_:)">failing(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">failing</span>(<span class="keyword">_</span> <span class="variable">prefix</span>: <span class="type">String</span>) -&gt; <span class="keyword">Self</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An effect that causes a test to fail if it runs.</p>

</div>
<div class="discussion">
    <p>This effect can provide an additional layer of certainty that a tested code path does not
execute a particular effect.</p>

<p>For example, let's say we have a very simple counter application, where a user can increment
and decrement a number. The state and actions are simple enough:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">CounterState</span>: <span class="type">Equatable</span> {
  <span class="keyword">var</span> <span class="variable">count</span> = <span class="number literal">0</span>
}

<span class="keyword">enum</span> <span class="type">CounterAction</span>: <span class="type">Equatable</span> {
  <span class="keyword">case</span> <span class="variable">decrementButtonTapped</span>
  <span class="keyword">case</span> <span class="variable">incrementButtonTapped</span>
}
</code></pre></body></html>
<p>Let's throw in a side effect. If the user attempts to decrement the counter below zero, the
application should refuse and play an alert sound instead.</p>

<p>We can model playing a sound in the environment with an effect:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">CounterEnvironment</span> {
  <span class="keyword">let</span> <span class="variable">playAlertSound</span>: () -&gt; <a href="/swift-composable-architecture/Effect"><span class="type">Effect</span></a>&lt;<span class="type">Never</span>, <span class="type">Never</span>&gt;
}
</code></pre></body></html>
<p>Now that we've defined the domain, we can describe the logic in a reducer:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">counterReducer</span> = <span class="variable">Reducer</span>&lt;
  <span class="type">CounterState</span>, <span class="type">CounterAction</span>, <span class="type">CounterEnvironment</span>
&gt; { <span class="variable">state</span>, <span class="variable">action</span>, <span class="variable">environment</span> <span class="keyword">in</span>
  <span class="keyword">switch</span> <span class="variable">action</span> {
  <span class="keyword">case</span> .<span class="variable">decrementButtonTapped</span>:
    <span class="keyword">if</span> <span class="variable">state</span> &gt; <span class="number literal">0</span> {
      <span class="variable">state</span>.<span class="variable">count</span> -= <span class="number literal">0</span>
      <span class="keyword">return</span> .<span class="variable">none</span>
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="variable">environment</span>.<span class="variable">playAlertSound</span>()
        .<span class="variable">fireAndForget</span>()
    }

  <span class="keyword">case</span> .<span class="variable">incrementButtonTapped</span>:
    <span class="type">state</span>.<span class="variable">count</span> += <span class="number literal">1</span>
    <span class="keyword">return</span> .<span class="variable">non</span>
  }
}
</code></pre></body></html>
<p>Let's say we want to write a test for the increment path. We can see in the reducer that it
should never play an alert, so we can configure the environment with an effect that will
fail if it ever executes:</p>

<html><body><pre class="highlight"><code><span class="keyword">func</span> <span class="function">testIncrement</span>() {
  <span class="keyword">let</span> <span class="variable">store</span> = <span class="variable">TestStore</span>(
    <span class="variable">initialState</span>: <span class="type">CounterState</span>(<span class="variable">count</span>: <span class="number literal">0</span>)
    <span class="variable">reducer</span>: <span class="type">counterReducer</span>,
    <span class="variable">environment</span>: <span class="type">CounterEnvironment</span>(
      <span class="variable">playSound</span>: .<span class="variable">failing</span>(<span class="string literal">"</span><span class="string literal">playSound</span><span class="string literal">"</span>)
    )
  )

  <span class="variable">store</span>.<span class="variable">send</span>(.<span class="variable">increment</span>) {
    <span class="variable">$0</span>.<span class="variable">count</span> = <span class="number literal">1</span>
  }
}
</code></pre></body></html>
<p>By using a <code>.failing</code> effect in our environment we have strengthened the assertion and made
the test easier to understand at the same time. We can see, without consulting the reducer
itself, that this particular action should not access this effect.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>prefix</th>
    <td><code class="type">String</code></td>
    <td><p>A string that identifies this scheduler and will prefix all failure messages.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An effect that causes a test to fail if it runs.</p>

</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2022-03-15T20:32:51+0000">March 15, 2022</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-rc.1</span>.
</p>
    </footer>
</body>
</html>
