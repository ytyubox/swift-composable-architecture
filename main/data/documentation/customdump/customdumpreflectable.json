{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CustomDumpReflectable"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Types that want to customize their dump output can conform to this protocol, especially those"},{"type":"text","text":" "},{"type":"text","text":"with a complex or nested internal structure. Providing a custom mirror allows you to reorder,"},{"type":"text","text":" "},{"type":"text","text":"transform, or omit fields on a base structure, or even change the representation of the base"},{"type":"text","text":" "},{"type":"text","text":"structure itself."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For unstructured data types, or data types that are represented by single values, see the"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/CustomDumpStringConvertible"},{"type":"text","text":" protocol."}]},{"anchor":"Customizing-the-dump-of-a-structure’s-fields","level":2,"type":"heading","text":"Customizing the dump of a structure’s fields"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For example, let’s say you have a struct representing login state, which holds a secure token in"},{"type":"text","text":" "},{"type":"text","text":"memory that should never be written to your logs. You can omit the token from "},{"type":"codeVoice","code":"customDump"},{"type":"text","text":" by"},{"type":"text","text":" "},{"type":"text","text":"providing a mirror that omits this field:"}]},{"type":"codeListing","syntax":"swift","code":["struct LoginState: CustomDumpReflectable {","  var email = \"\"","  var password = \"\"","  var token: String","","  var customDumpMirror: Mirror {","    .init(","      self,","      children: [","        \"email\": self.email,","        \"password\": self.password","        \/\/ omit token from logs","      ],","      displayStyle: .struct","    )","  }","}","","customDump(","  LoginState(","    email: \"blob@pointfree.co\",","    password: \"bl0bisawesome!\",","    token: \"secret\"","  )",")"]},{"type":"codeListing","syntax":"text","code":["LoginState(","  email: \"blob@pointfree.co\",","  password: \"bl0bisawesome!\"",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There! No token data is being written to the dump. However, the dump still contains the user’s"},{"type":"text","text":" "},{"type":"text","text":"password, which is sensitive. Rather than omit it entirely, we could redact this information"},{"type":"text","text":" "},{"type":"text","text":"using a "},{"type":"codeVoice","code":"Redacted"},{"type":"text","text":" wrapper type that redacts its contents from custom dumps via the"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/CustomDumpStringConvertible"},{"type":"text","text":" protocol:"}]},{"type":"codeListing","syntax":"swift","code":["struct Redacted<RawValue>: CustomDumpStringConvertible {","  let rawValue: RawValue","","  var customDumpDescription: String {","    \"<redacted>\"","  }","}","","struct LoginState: CustomDumpReflectable {","  ...","  var customDumpMirror: Mirror {","    .init(","      self,","      children: [","        \"email\": self.email,","        \/\/ redact password!","        \"password\": Redacted(rawValue: self.password)","        \/\/ omit token from logs","      ],","      displayStyle: .struct","    )","  }","}","","customDump(","  LoginState(","    email: \"blob@pointfree.co\",","    password: \"bl0bisawesome!\",","    token: \"secret\"","  )",")"]},{"type":"codeListing","syntax":"text","code":["LoginState(","  email: \"blob@pointfree.co\",","  password: <redacted>",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now the dump retains the fact that a password field exists, but it prevents the underlying value"},{"type":"text","text":" "},{"type":"text","text":"from being logged."}]},{"anchor":"Overriding-a-structure’s-dump-representation","level":2,"type":"heading","text":"Overriding a structure’s dump representation"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Massaging the data inside a structure is just one way to use a custom mirror. A mirror can also"},{"type":"text","text":" "},{"type":"text","text":"let you completely transform the "},{"type":"emphasis","inlineContent":[{"type":"text","text":"way"}]},{"type":"text","text":" a structure is dumped."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For example, a wrapper type can be flattened to dump the wrapped value by providing the wrapped"},{"type":"text","text":" "},{"type":"text","text":"value’s mirror:"}]},{"type":"codeListing","syntax":"swift","code":["struct Todos: CustomDumpReflectable {","  var rawValue: [Todo] = []","","  var customDumpMirror: Mirror {","    .init(reflecting: self.rawValue)","  }","}","","customDump(Todos())"]},{"type":"codeListing","syntax":"text","code":["[]"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/customdump\/customdumpreflectable"],"traits":[{"interfaceLanguage":"swift"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/AlertState","doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/AlertState\/Button","doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/AlertState\/ButtonAction","doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/BindingAction","doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/ConfirmationDialogState"],"kind":"relationships","title":"Conforming Types","type":"conformingTypes"}],"identifier":{"url":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/CustomDumpReflectable","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"A type that explicitly supplies its own mirror for "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/customDump(_:to:name:indent:maxDepth:)"},{"type":"text","text":" "},{"type":"text","text":"and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/diff(_:_:format:)"},{"type":"text","text":"."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CustomDumpReflectable"}],"title":"CustomDumpReflectable","roleHeading":"Protocol","role":"symbol","symbolKind":"protocol","externalID":"s:10CustomDump0aB11ReflectableP","modules":[{"name":"CustomDump"}],"navigatorTitle":[{"kind":"identifier","text":"CustomDumpReflectable"}]},"hierarchy":{"paths":[["doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump"]]},"topicSections":[{"title":"Instance Properties","identifiers":["doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/CustomDumpReflectable\/customDumpMirror"]}],"references":{"doc://co.pointfree.ComposableArchitecture/documentation/CustomDump/diff(_:_:format:)":{"role":"symbol","title":"diff(_:_:format:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"diff"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:10CustomDump4diff__6formatSSSgx_xAA10DiffFormatVtlF1TL_xmfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:10CustomDump4diff__6formatSSSgx_xAA10DiffFormatVtlF1TL_xmfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"format"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"DiffFormat","preciseIdentifier":"s:10CustomDump10DiffFormatV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Detects differences between two given values by comparing their mirrors and optionally returns"},{"type":"text","text":" "},{"type":"text","text":"a formatted string describing it."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/diff(_:_:format:)","kind":"symbol","type":"topic","url":"\/documentation\/customdump\/diff(_:_:format:)"},"doc://co.pointfree.ComposableArchitecture/documentation/ComposableArchitecture/AlertState":{"role":"symbol","title":"AlertState","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AlertState"}],"abstract":[{"type":"text","text":"A data type that describes the state of an alert that can be shown to the user. The "},{"type":"codeVoice","code":"Action"},{"type":"text","text":" "},{"type":"text","text":"generic is the type of actions that can be sent from tapping on a button in the alert."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/AlertState","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AlertState"}],"url":"\/documentation\/composablearchitecture\/alertstate"},"doc://co.pointfree.ComposableArchitecture/documentation/CustomDump/CustomDumpStringConvertible":{"role":"symbol","title":"CustomDumpStringConvertible","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CustomDumpStringConvertible"}],"abstract":[{"type":"text","text":"A type with a customized textual representation for "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/customDump(_:to:name:indent:maxDepth:)"},{"type":"text","text":" "},{"type":"text","text":"and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/diff(_:_:format:)"},{"type":"text","text":"."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/CustomDumpStringConvertible","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CustomDumpStringConvertible"}],"url":"\/documentation\/customdump\/customdumpstringconvertible"},"doc://co.pointfree.ComposableArchitecture/documentation/CustomDump/CustomDumpReflectable":{"role":"symbol","title":"CustomDumpReflectable","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CustomDumpReflectable"}],"abstract":[{"type":"text","text":"A type that explicitly supplies its own mirror for "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/customDump(_:to:name:indent:maxDepth:)"},{"type":"text","text":" "},{"type":"text","text":"and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/diff(_:_:format:)"},{"type":"text","text":"."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/CustomDumpReflectable","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CustomDumpReflectable"}],"url":"\/documentation\/customdump\/customdumpreflectable"},"doc://co.pointfree.ComposableArchitecture/documentation/CustomDump/customDump(_:to:name:indent:maxDepth:)":{"role":"symbol","title":"customDump(_:to:name:indent:maxDepth:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"customDump"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"TargetStream"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:10CustomDump06customB0_2to4name6indent8maxDepthxx_q_zSSSgS2its16TextOutputStreamR_r0_lF1TL_xmfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"to"},{"kind":"text","text":": "},{"kind":"keyword","text":"inout"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"TargetStream","preciseIdentifier":"s:10CustomDump06customB0_2to4name6indent8maxDepthxx_q_zSSSgS2its16TextOutputStreamR_r0_lF06TargetK0L_q_mfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"name"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"indent"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":", "},{"kind":"externalParam","text":"maxDepth"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:10CustomDump06customB0_2to4name6indent8maxDepthxx_q_zSSSgS2its16TextOutputStreamR_r0_lF1TL_xmfp"}],"abstract":[{"type":"text","text":"Dumps the given value’s contents using its mirror to the specified output stream."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/customDump(_:to:name:indent:maxDepth:)","kind":"symbol","type":"topic","url":"\/documentation\/customdump\/customdump(_:to:name:indent:maxdepth:)"},"doc://co.pointfree.ComposableArchitecture/documentation/CustomDump/CustomDumpReflectable/customDumpMirror":{"role":"symbol","title":"customDumpMirror","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"customDumpMirror"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Mirror","preciseIdentifier":"s:s6MirrorV"}],"abstract":[{"type":"text","text":"The custom dump mirror for this instance."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump\/CustomDumpReflectable\/customDumpMirror","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/customdump\/customdumpreflectable\/customdumpmirror"},"doc://co.pointfree.ComposableArchitecture/documentation/ComposableArchitecture/BindingAction":{"role":"symbol","title":"BindingAction","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"BindingAction"}],"abstract":[{"type":"text","text":"An action that describes simple mutations to some root state at a writable key path."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/BindingAction","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"BindingAction"}],"url":"\/documentation\/composablearchitecture\/bindingaction"},"doc://co.pointfree.ComposableArchitecture/documentation/ComposableArchitecture/AlertState/Button":{"role":"symbol","title":"AlertState.Button","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Button"}],"abstract":[],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/AlertState\/Button","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Button"}],"url":"\/documentation\/composablearchitecture\/alertstate\/button"},"doc://co.pointfree.ComposableArchitecture/documentation/CustomDump":{"role":"collection","title":"CustomDump","abstract":[],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/CustomDump","kind":"symbol","type":"topic","url":"\/documentation\/customdump"},"doc://co.pointfree.ComposableArchitecture/documentation/ComposableArchitecture/ConfirmationDialogState":{"role":"symbol","title":"ConfirmationDialogState","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ConfirmationDialogState"}],"abstract":[{"type":"text","text":"A data type that describes the state of a confirmation dialog that can be shown to the user. The"},{"type":"text","text":" "},{"type":"codeVoice","code":"Action"},{"type":"text","text":" generic is the type of actions that can be sent from tapping on a button in the sheet."}],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/ConfirmationDialogState","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ConfirmationDialogState"}],"url":"\/documentation\/composablearchitecture\/confirmationdialogstate"},"doc://co.pointfree.ComposableArchitecture/documentation/ComposableArchitecture/AlertState/ButtonAction":{"role":"symbol","title":"AlertState.ButtonAction","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ButtonAction"}],"abstract":[],"identifier":"doc:\/\/co.pointfree.ComposableArchitecture\/documentation\/ComposableArchitecture\/AlertState\/ButtonAction","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ButtonAction"}],"url":"\/documentation\/composablearchitecture\/alertstate\/buttonaction"}}}